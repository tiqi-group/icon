version: '3.8'

services:
  valkey:
    image: valkey/valkey:unstable
    network_mode: host
  influxdb:
    image: influxdb:latest
    network_mode: host
    privileged: true
    volumes:
      - "$PWD/influxdb/:/docker-entrypoint-initdb.d"
    environment:
      DOCKER_INFLUXDB_INIT_MODE: setup
      DOCKER_INFLUXDB_INIT_USERNAME: qchub-admin
      DOCKER_INFLUXDB_INIT_PASSWORD: Xo28JuCnXvrkq5
      DOCKER_INFLUXDB_INIT_ORG: test
      DOCKER_INFLUXDB_INIT_BUCKET: testing
      DOCKER_INFLUXDB_INIT_ADMIN_TOKEN: my-super-secret-auth-token
      V1_AUTH_USERNAME: qchub-admin
      V1_AUTH_PASSWORD: Xo28JuCnXvrkq5
