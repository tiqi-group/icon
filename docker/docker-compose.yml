version: '3.8'

services:
  valkey:
    image: valkey/valkey:unstable
    network_mode: host
  influxdb:
    image: influxdb:latest
    network_mode: host
    privileged: true
    volumes:
      - "$PWD/influxdb/:/docker-entrypoint-initdb.d"
    environment:
      DOCKER_INFLUXDB_INIT_MODE: setup
      DOCKER_INFLUXDB_INIT_USERNAME: tester
      DOCKER_INFLUXDB_INIT_PASSWORD: test
      DOCKER_INFLUXDB_INIT_ORG: test
      DOCKER_INFLUXDB_INIT_BUCKET: testing
      DOCKER_INFLUXDB_INIT_ADMIN_TOKEN: my-super-secret-auth-token
      V1_AUTH_USERNAME: tester
      V1_AUTH_PASSWORD: test
